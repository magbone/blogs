<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-cn">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://i.xhi.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">






  <link rel="canonical" href="https://i.xhi.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Hexo</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2019/02/08/minio-wiki/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/08/minio-wiki/" class="post-title-link" itemprop="url">minio使用手册</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-08 18:32:38" itemprop="dateCreated datePublished" datetime="2019-02-08T18:32:38+08:00">2019-02-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>inio 是一个基于Apache License v2.0开源协议的对象存储服务。它兼容亚马逊S3云存储服务接口，非常适合于存储大容量非结构化的数据，例如图片、视频、日志文件、备份数据和容器/虚拟机镜像等，而一个对象文件可以是任意大小，从几kb到最大5T不等。 </p>
<p>Minio是一个非常轻量的服务,可以很简单的和其他应用的结合，类似 NodeJS, Redis 或者 MySQL。</p>
<h2 id="Docker-容器"><a href="#Docker-容器" class="headerlink" title="Docker 容器"></a>Docker 容器</h2><h3 id="稳定版"><a href="#稳定版" class="headerlink" title="稳定版"></a>稳定版</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull minio/minio</span><br><span class="line">docker run -p 9000:9000 minio/minio server /data</span><br></pre></td></tr></table></figure>
<h3 id="尝鲜版"><a href="#尝鲜版" class="headerlink" title="尝鲜版"></a>尝鲜版</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull minio/minio:edge</span><br><span class="line">docker run -p 9000:9000 minio/minio:edge server /data</span><br></pre></td></tr></table></figure>
<p>更多Docker部署信息请访问 <a href="https://docs.minio.io/docs/minio-docker-quickstart-guide" target="_blank" rel="noopener">这里</a></p>
<h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h3><p>使用 <a href="http://brew.sh/" target="_blank" rel="noopener">Homebrew</a>安装minio</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install minio/stable/minio</span><br><span class="line">minio server /data</span><br></pre></td></tr></table></figure>
<h4 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h4><p>如果你之前使用 <code>brew install minio</code>安装过minio, 可以用 <code>minio/stable/minio</code> 官方镜像进行重装. 由于golang 1.8的bug,homebrew版本不太稳定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall minio</span><br><span class="line">brew install minio/stable/minio</span><br></pre></td></tr></table></figure>
<h3 id="下载二进制文件"><a href="#下载二进制文件" class="headerlink" title="下载二进制文件"></a>下载二进制文件</h3><div class="table-container">
<table>
<thead>
<tr>
<th>操作系统</th>
<th>CPU架构</th>
<th>地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>Apple macOS</td>
<td>64-bit Intel</td>
<td><a href="https://dl.minio.io/server/minio/release/darwin-amd64/minio" target="_blank" rel="noopener">https://dl.minio.io/server/minio/release/darwin-amd64/minio</a></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 minio</span><br><span class="line">./minio server /data</span><br></pre></td></tr></table></figure>
<h2 id="GNU-Linux"><a href="#GNU-Linux" class="headerlink" title="GNU/Linux"></a>GNU/Linux</h2><h3 id="下载二进制文件-1"><a href="#下载二进制文件-1" class="headerlink" title="下载二进制文件"></a>下载二进制文件</h3><div class="table-container">
<table>
<thead>
<tr>
<th>操作系统</th>
<th>CPU架构</th>
<th>地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>GNU/Linux</td>
<td>64-bit Intel</td>
<td><a href="https://dl.minio.io/server/minio/release/linux-amd64/minio" target="_blank" rel="noopener">https://dl.minio.io/server/minio/release/linux-amd64/minio</a></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x minio</span><br><span class="line">./minio server /data</span><br></pre></td></tr></table></figure>
<h2 id="微软Windows系统"><a href="#微软Windows系统" class="headerlink" title="微软Windows系统"></a>微软Windows系统</h2><h3 id="下载二进制文件-2"><a href="#下载二进制文件-2" class="headerlink" title="下载二进制文件"></a>下载二进制文件</h3><div class="table-container">
<table>
<thead>
<tr>
<th>操作系统</th>
<th>CPU架构</th>
<th>地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>微软Windows系统</td>
<td>64位</td>
<td><a href="https://dl.minio.io/server/minio/release/windows-amd64/minio.exe" target="_blank" rel="noopener">https://dl.minio.io/server/minio/release/windows-amd64/minio.exe</a></td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minio.exe server D:\Photos</span><br></pre></td></tr></table></figure>
<h2 id="FreeBSD"><a href="#FreeBSD" class="headerlink" title="FreeBSD"></a>FreeBSD</h2><h3 id="Port"><a href="#Port" class="headerlink" title="Port"></a>Port</h3><p>使用 <a href="https://github.com/freebsd/pkg" target="_blank" rel="noopener">pkg</a>进行安装。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pkg install minio</span><br><span class="line">sysrc minio_enable=yes</span><br><span class="line">sysrc minio_disks=/home/user/Photos</span><br><span class="line">service minio start</span><br></pre></td></tr></table></figure>
<h2 id="使用源码安装"><a href="#使用源码安装" class="headerlink" title="使用源码安装"></a>使用源码安装</h2><p>采用源码安装仅供开发人员和高级用户使用,如果你还没有Golang环境， 请参考 <a href="https://docs.minio.io/docs/how-to-install-golang" target="_blank" rel="noopener">How to install Golang</a>.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/minio/minio</span><br></pre></td></tr></table></figure>
<h2 id="使用Minio浏览器进行验证"><a href="#使用Minio浏览器进行验证" class="headerlink" title="使用Minio浏览器进行验证"></a>使用Minio浏览器进行验证</h2><p>安装后使用浏览器访问<a href="http://127.0.0.1:9000" target="_blank" rel="noopener">http://127.0.0.1:9000</a>，如果可以访问，则表示minio已经安装成功。</p>
<p><img src="https://github.com/minio/minio/blob/master/docs/screenshots/minio-browser.png?raw=true" alt="Screenshot"></p>
<h2 id="使用Minio客户端-mc进行验证"><a href="#使用Minio客户端-mc进行验证" class="headerlink" title="使用Minio客户端 mc进行验证"></a>使用Minio客户端 <code>mc</code>进行验证</h2><p><code>mc</code> 提供了一些UNIX常用命令的替代品，像ls, cat, cp, mirror, diff这些。 它支持文件系统和亚马逊S3云存储服务。 更多信息请参考 <a href="https://docs.minio.io/docs/minio-client-quickstart-guide" target="_blank" rel="noopener">mc快速入门</a> 。</p>
<h2 id="已经存在的数据"><a href="#已经存在的数据" class="headerlink" title="已经存在的数据"></a>已经存在的数据</h2><p>当在单块磁盘上部署Minio server,Minio server允许客户端访问数据目录下已经存在的数据。比如，如果Minio使用<code>minio server /mnt/data</code>启动，那么所有已经在<code>/mnt/data</code>目录下的数据都可以被客户端访问到。</p>
<p>上述描述对所有网关后端同样有效。</p>
<h2 id="了解更多"><a href="#了解更多" class="headerlink" title="了解更多"></a>了解更多</h2><ul>
<li><a href="https://docs.minio.io/docs/minio-erasure-code-quickstart-guide" target="_blank" rel="noopener">Minio纠删码入门</a></li>
<li><a href="https://docs.minio.io/docs/minio-client-quickstart-guide" target="_blank" rel="noopener"><code>mc</code>快速入门</a></li>
<li><a href="https://docs.minio.io/docs/aws-cli-with-minio" target="_blank" rel="noopener">使用 <code>aws-cli</code></a></li>
<li><a href="https://docs.minio.io/docs/s3cmd-with-minio" target="_blank" rel="noopener">使用 <code>s3cmd</code></a></li>
<li><a href="https://docs.minio.io/docs/golang-client-quickstart-guide" target="_blank" rel="noopener">使用 <code>minio-go</code> SDK</a></li>
<li><a href="https://docs.minio.io" target="_blank" rel="noopener">Minio文档</a></li>
</ul>
<h2 id="如何参与到Minio项目"><a href="#如何参与到Minio项目" class="headerlink" title="如何参与到Minio项目"></a>如何参与到Minio项目</h2><p>请参考 <a href="https://github.com/minio/minio/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">贡献者指南</a>。欢迎各位中国程序员加到Minio项目中。</p>
<h2 id="文档来源https-github-com-minio-minio-blob-master-README-zh-CN-md"><a href="#文档来源https-github-com-minio-minio-blob-master-README-zh-CN-md" class="headerlink" title="文档来源https://github.com/minio/minio/blob/master/README_zh_CN.md"></a>文档来源<a href="https://github.com/minio/minio/blob/master/README_zh_CN.md" target="_blank" rel="noopener">https://github.com/minio/minio/blob/master/README_zh_CN.md</a></h2>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2019/01/29/md/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/29/md/" class="post-title-link" itemprop="url">摘要算法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-01-29 17:05:35" itemprop="dateCreated datePublished" datetime="2019-01-29T17:05:35+08:00">2019-01-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="MD2"><a href="#MD2" class="headerlink" title="MD2"></a>MD2</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>MD2消息摘要算法是Ronald Rivest在1989年发现的加密哈希方法。这个算法是对八位计算机的优化。MD2在<a href="https://tools.ietf.org/html/rfc1319" target="_blank" rel="noopener">RFC1319</a>中有详细的介绍。即使MD2在2014后已不再被认为是安全的，但它仍然保留在用MD2和RSA生成的证书的公钥的基础。『MD』在MD2中代表”Message Digest（消息摘要）”。</p>
<p>以下内容翻译自<a href="https://tools.ietf.org/html/rfc1319" target="_blank" rel="noopener">rfc1319</a></p>
<blockquote>
<h3 id="摘要-lt-br-gt"><a href="#摘要-lt-br-gt" class="headerlink" title="摘要 &lt;/br&gt;"></a>摘要 &lt;/br&gt;</h3><p>这个文档描述MD2消息摘要算法。该算法将一个任意长度的消息作为输入并且运行输出一个128bit的『指纹』或者『消息摘要』输入。据推测它不可能得出两条消息有一样的消息摘要，或者能计算出人格消息有一个预先给定的目标消息摘要。MD2算法旨在数字签名应用，在大文件必须在一个公钥加密系统像RSA产生的私钥签名之前用安全的行为进行『压缩』。&lt;/br&gt;<br>使用MD2的许可由非经营的 Internet Privacy Enhanced Mail{1-3}提供的。&lt;/br&gt;</p>
<h4 id="术语和注意事项-lt-br-gt"><a href="#术语和注意事项-lt-br-gt" class="headerlink" title="术语和注意事项 &lt;/br&gt;"></a>术语和注意事项 &lt;/br&gt;</h4><p>本文中，1 “byte” 是代表8bit。 &lt;/br&gt;<br>x_i 代表 “s sub i”。如果标注的是一个表达式，我们像x_{i+1}用大括号包裹它。同样的，我们使用^表示x^i为x的i次方。&lt;/br&gt;<br>X xor Y 表示X与Y异或。</p>
<h3 id="MD2算法描述"><a href="#MD2算法描述" class="headerlink" title="MD2算法描述"></a>MD2算法描述</h3><p>开始我们假设有b-byte的消息作为输入，并且我们细化找到它的消息摘要。其中b是一个任意无符号正数；b可以是零，可以任意大小。我们想象这几byte消息如下：&lt;/br&gt;</p>
<p><center>m_0 m_1 ... m_{b-1}</center> &lt;/br&gt;<br>接下来的五个步骤教你如何生成一个消息的消息摘要。 </p>
<h4 id="第一步-附上扩展的bytes"><a href="#第一步-附上扩展的bytes" class="headerlink" title="第一步 附上扩展的bytes"></a>第一步 附上扩展的bytes</h4><p>消息是被扩展的以至于他的长度(bytes)是模16等于零的，它是很多个16bytes长的。这个扩展是必须的，即便它的长度模16等于零。&lt;/br&gt;<br>扩展的工作如下：”i” 值 “i” byte被扩展的信息的长度能模16等于0。所以至少扩展1 byte和至多16 bytes。&lt;/br&gt;<br>这个时候，在扩展之后的信息的是准确的多个16 bytes长度。M[0 … N-1]为扩展后的信息，其中N是多个16。</p>
<h4 id="第二步-扩展校验码"><a href="#第二步-扩展校验码" class="headerlink" title="第二步 扩展校验码"></a>第二步 扩展校验码</h4><p>一个16-byte的信息的校验码被拼接在前一个步骤结果上。&lt;/br&gt;<br>这一步使用一个256-byte的 从pi 构建的『随机』排列。S[i]第i个表中的元素。这个表在附录中给出的。&lt;/br&gt;<br>如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> /* 清除校验码 */</span><br><span class="line"> For i = 0 to 15 do:</span><br><span class="line">   Set C[i] to  0.</span><br><span class="line">  end</span><br><span class="line">Set L to 0.</span><br><span class="line">  /* 执行每个16子的块 */</span><br><span class="line">  For i = 0 to N/16-1 do</span><br><span class="line">       /* i个校验码块 */</span><br><span class="line">       For j = 0 to 15 do</span><br><span class="line">         Set c to M[i * 16 + j].</span><br><span class="line">         Set C[j] to S[c xor L].</span><br><span class="line">         Set L to C[j].</span><br><span class="line">        end</span><br><span class="line">  end</span><br></pre></td></tr></table></figure></p>
<p> 16-byte 的校验码C[0 … 15]就被拼接在了消息上，设M[0 和校验码]， 其中N’ = N + 16。</p>
<h4 id="第三步初始化MD缓冲区"><a href="#第三步初始化MD缓冲区" class="headerlink" title="第三步初始化MD缓冲区"></a>第三步初始化MD缓冲区</h4><p> 48-byte 缓冲区X，是用来结算消息摘要的。这个缓冲区初始化为0.</p>
<h5 id="第四步-创建-16-Byte-块的消息"><a href="#第四步-创建-16-Byte-块的消息" class="headerlink" title="第四步 创建 16-Byte 块的消息"></a>第四步 创建 16-Byte 块的消息</h5><p> 这一步使用相同的256-byte序列S，像第二步一样做。<br> 如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/* 执行每个16子的块*/</span><br><span class="line">For i = 0  to N&apos;/16-1 do</span><br><span class="line">     /* 复制每个块j到X */</span><br><span class="line">     For j = 0 to 15 do</span><br><span class="line">        Set X[16 + j] to M[i * 16 + j].</span><br><span class="line">        Set X[32 + j] to (X[16 + j] xor X[j]).</span><br><span class="line">        end</span><br><span class="line">        Set t to 0</span><br><span class="line">        /* 18次循环 */</span><br><span class="line">        For j = 0 to 17 do</span><br><span class="line">           /* 循环j */</span><br><span class="line">           For k = 0  to 47 do</span><br><span class="line">              Set t and X[k] to (X[k] xor S[t]).</span><br><span class="line">            end</span><br><span class="line">         end</span><br><span class="line">  end</span><br></pre></td></tr></table></figure></p>
<h4 id="第五步输出"><a href="#第五步输出" class="headerlink" title="第五步输出"></a>第五步输出</h4><p>消息摘要输出X[0 … 15]。开始于X[0]，结束于X[15]。</p>
</blockquote>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>以下代码是来源参考文档，有所修改。</p>
<p>md2算法有如下三个文件<code>global.h</code>，<code>md2.h</code>，<code>md2c.c</code>。</p>
<h3 id="global-h"><a href="#global-h" class="headerlink" title="global.h"></a>global.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* PROTOTYPES */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> PROTOTYPES</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PROTOTYPES 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* POINTER 定义为一个一般的指针类型 */</span></span><br><span class="line"><span class="keyword">typedef</span>  <span class="keyword">unsigned</span>  <span class="keyword">char</span> *POINTER;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* UINT2 定义为2byte的变量 */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">short</span> <span class="keyword">int</span> UINT2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* UINT4 定义为4byte的变量 */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">int</span> UINT4;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* PROTO_LIST 定义是基于PROTOTYPES怎样定义的，如果使用PROTOTYPES，那么PROTO_LIST返回这个列表，否则返回一个空的列表。 */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> PROTOTYPES</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PROTO_LIST(list) list</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PROTO_LIST(List) ()</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h3 id="md2-h"><a href="#md2-h" class="headerlink" title="md2.h"></a>md2.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> state[<span class="number">16</span>];   <span class="comment">/* 状态 */</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> checksum[<span class="number">16</span>];  <span class="comment">/* 校验码 */</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">int</span> count; <span class="comment">/* 多少byte，模16 */</span></span><br><span class="line">	<span class="keyword">unsigned</span> <span class="keyword">char</span> buffer[<span class="number">16</span>]; <span class="comment">/* 输入缓冲 */</span></span><br><span class="line">&#125; MD2_CTX;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> MD2Init <span class="title">PROTO_LIST</span><span class="params">(( MD2_ CTX * ))</span></span>;'</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> MD2Update <span class="title">PROTO_LIST</span><span class="params">(( MD2_CTX *,  <span class="keyword">unsigned</span> <span class="keyword">char</span> *, <span class="keyword">unsigned</span> <span class="keyword">int</span> ))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> MD2Final <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">unsigned</span> <span class="keyword">char</span> [<span class="number">16</span>], MD2_CTX *))</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="md2c-c"><a href="#md2c-c" class="headerlink" title="md2c.c"></a>md2c.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"global.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"md2.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"global.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"md2.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> MD2Transform PROTO_LIST</span><br><span class="line">  ((<span class="keyword">unsigned</span> <span class="keyword">char</span> [<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span> [<span class="number">16</span>], <span class="keyword">unsigned</span> <span class="keyword">char</span> [<span class="number">16</span>]));</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MD2_memcpy <span class="title">PROTO_LIST</span> <span class="params">((POINTER, POINTER, <span class="keyword">unsigned</span> <span class="keyword">int</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MD2_memset <span class="title">PROTO_LIST</span> <span class="params">((POINTER, <span class="keyword">int</span>, <span class="keyword">unsigned</span> <span class="keyword">int</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 从Pi中构造排列，它给出『随机』非线性置换操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> PI_SUBST[<span class="number">256</span>] = &#123;</span><br><span class="line">  <span class="number">41</span>, <span class="number">46</span>, <span class="number">67</span>, <span class="number">201</span>, <span class="number">162</span>, <span class="number">216</span>, <span class="number">124</span>, <span class="number">1</span>, <span class="number">61</span>, <span class="number">54</span>, <span class="number">84</span>, <span class="number">161</span>, <span class="number">236</span>, <span class="number">240</span>, <span class="number">6</span>,<span class="number">19</span>, <span class="number">98</span>, <span class="number">167</span>, <span class="number">5</span>, <span class="number">243</span>, <span class="number">192</span>, <span class="number">199</span>, <span class="number">115</span>, <span class="number">140</span>, <span class="number">152</span>, <span class="number">147</span>, <span class="number">43</span>, <span class="number">217</span>, <span class="number">188</span>,</span><br><span class="line">  <span class="number">76</span>, <span class="number">130</span>, <span class="number">202</span>, <span class="number">30</span>, <span class="number">155</span>, <span class="number">87</span>, <span class="number">60</span>, <span class="number">253</span>, <span class="number">212</span>, <span class="number">224</span>, <span class="number">22</span>, <span class="number">103</span>, <span class="number">66</span>, <span class="number">111</span>, <span class="number">24</span>,</span><br><span class="line">  <span class="number">138</span>, <span class="number">23</span>, <span class="number">229</span>, <span class="number">18</span>, <span class="number">190</span>, <span class="number">78</span>, <span class="number">196</span>, <span class="number">214</span>, <span class="number">218</span>, <span class="number">158</span>, <span class="number">222</span>, <span class="number">73</span>, <span class="number">160</span>, <span class="number">251</span>,</span><br><span class="line">  <span class="number">245</span>, <span class="number">142</span>, <span class="number">187</span>, <span class="number">47</span>, <span class="number">238</span>, <span class="number">122</span>, <span class="number">169</span>, <span class="number">104</span>, <span class="number">121</span>, <span class="number">145</span>, <span class="number">21</span>, <span class="number">178</span>, <span class="number">7</span>, <span class="number">63</span>,</span><br><span class="line">  <span class="number">148</span>, <span class="number">194</span>, <span class="number">16</span>, <span class="number">137</span>, <span class="number">11</span>, <span class="number">34</span>, <span class="number">95</span>, <span class="number">33</span>, <span class="number">128</span>, <span class="number">127</span>, <span class="number">93</span>, <span class="number">154</span>, <span class="number">90</span>, <span class="number">144</span>, <span class="number">50</span>,</span><br><span class="line">  <span class="number">39</span>, <span class="number">53</span>, <span class="number">62</span>, <span class="number">204</span>, <span class="number">231</span>, <span class="number">191</span>, <span class="number">247</span>, <span class="number">151</span>, <span class="number">3</span>, <span class="number">255</span>, <span class="number">25</span>, <span class="number">48</span>, <span class="number">179</span>, <span class="number">72</span>, <span class="number">165</span>,</span><br><span class="line">  <span class="number">181</span>, <span class="number">209</span>, <span class="number">215</span>, <span class="number">94</span>, <span class="number">146</span>, <span class="number">42</span>, <span class="number">172</span>, <span class="number">86</span>, <span class="number">170</span>, <span class="number">198</span>, <span class="number">79</span>, <span class="number">184</span>, <span class="number">56</span>, <span class="number">210</span>,</span><br><span class="line">  <span class="number">150</span>, <span class="number">164</span>, <span class="number">125</span>, <span class="number">182</span>, <span class="number">118</span>, <span class="number">252</span>, <span class="number">107</span>, <span class="number">226</span>, <span class="number">156</span>, <span class="number">116</span>, <span class="number">4</span>, <span class="number">241</span>, <span class="number">69</span>, <span class="number">157</span>,</span><br><span class="line">  <span class="number">112</span>, <span class="number">89</span>, <span class="number">100</span>, <span class="number">113</span>, <span class="number">135</span>, <span class="number">32</span>, <span class="number">134</span>, <span class="number">91</span>, <span class="number">207</span>, <span class="number">101</span>, <span class="number">230</span>, <span class="number">45</span>, <span class="number">168</span>, <span class="number">2</span>, <span class="number">27</span>,</span><br><span class="line">  <span class="number">96</span>, <span class="number">37</span>, <span class="number">173</span>, <span class="number">174</span>, <span class="number">176</span>, <span class="number">185</span>, <span class="number">246</span>, <span class="number">28</span>, <span class="number">70</span>, <span class="number">97</span>, <span class="number">105</span>, <span class="number">52</span>, <span class="number">64</span>, <span class="number">126</span>, <span class="number">15</span>,</span><br><span class="line">  <span class="number">85</span>, <span class="number">71</span>, <span class="number">163</span>, <span class="number">35</span>, <span class="number">221</span>, <span class="number">81</span>, <span class="number">175</span>, <span class="number">58</span>, <span class="number">195</span>, <span class="number">92</span>, <span class="number">249</span>, <span class="number">206</span>, <span class="number">186</span>, <span class="number">197</span>,</span><br><span class="line">  <span class="number">234</span>, <span class="number">38</span>, <span class="number">44</span>, <span class="number">83</span>, <span class="number">13</span>, <span class="number">110</span>, <span class="number">133</span>, <span class="number">40</span>, <span class="number">132</span>, <span class="number">9</span>, <span class="number">211</span>, <span class="number">223</span>, <span class="number">205</span>, <span class="number">244</span>, <span class="number">65</span>,</span><br><span class="line">  <span class="number">129</span>, <span class="number">77</span>, <span class="number">82</span>, <span class="number">106</span>, <span class="number">220</span>, <span class="number">55</span>, <span class="number">200</span>, <span class="number">108</span>, <span class="number">193</span>, <span class="number">171</span>, <span class="number">250</span>, <span class="number">36</span>, <span class="number">225</span>, <span class="number">123</span>,</span><br><span class="line">  <span class="number">8</span>, <span class="number">12</span>, <span class="number">189</span>, <span class="number">177</span>, <span class="number">74</span>, <span class="number">120</span>, <span class="number">136</span>, <span class="number">149</span>, <span class="number">139</span>, <span class="number">227</span>, <span class="number">99</span>, <span class="number">232</span>, <span class="number">109</span>, <span class="number">233</span>,</span><br><span class="line">  <span class="number">203</span>, <span class="number">213</span>, <span class="number">254</span>, <span class="number">59</span>, <span class="number">0</span>, <span class="number">29</span>, <span class="number">57</span>, <span class="number">242</span>, <span class="number">239</span>, <span class="number">183</span>, <span class="number">14</span>, <span class="number">102</span>, <span class="number">88</span>, <span class="number">208</span>, <span class="number">228</span>,</span><br><span class="line">  <span class="number">166</span>, <span class="number">119</span>, <span class="number">114</span>, <span class="number">248</span>, <span class="number">235</span>, <span class="number">117</span>, <span class="number">75</span>, <span class="number">10</span>, <span class="number">49</span>, <span class="number">68</span>, <span class="number">80</span>, <span class="number">180</span>, <span class="number">143</span>, <span class="number">237</span>,</span><br><span class="line">  <span class="number">31</span>, <span class="number">26</span>, <span class="number">219</span>, <span class="number">153</span>, <span class="number">141</span>, <span class="number">51</span>, <span class="number">159</span>, <span class="number">17</span>, <span class="number">131</span>, <span class="number">20</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *PADDING[] = &#123;</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">""</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\001"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\002\002"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\003\003\003"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\004\004\004\004"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\005\005\005\005\005"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\006\006\006\006\006\006"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\007\007\007\007\007\007\007"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\010\010\010\010\010\010\010\010"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\011\011\011\011\011\011\011\011\011"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\012\012\012\012\012\012\012\012\012\012"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\013\013\013\013\013\013\013\013\013\013\013"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">"\014\014\014\014\014\014\014\014\014\014\014\014"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)</span><br><span class="line">    <span class="string">"\015\015\015\015\015\015\015\015\015\015\015\015\015"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)</span><br><span class="line">    <span class="string">"\016\016\016\016\016\016\016\016\016\016\016\016\016\016"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)</span><br><span class="line">    <span class="string">"\017\017\017\017\017\017\017\017\017\017\017\017\017\017\017"</span>,</span><br><span class="line">  (<span class="keyword">unsigned</span> <span class="keyword">char</span> *)</span><br><span class="line">    <span class="string">"\020\020\020\020\020\020\020\020\020\020\020\020\020\020\020\020"</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MD2 初始化 。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MD2Init</span> <span class="params">(context)</span></span></span><br><span class="line"><span class="function">MD2_CTX *context</span>;               <span class="comment">/* 上下文 */</span></span><br><span class="line">&#123;                         </span><br><span class="line">context-&gt;count = <span class="number">0</span>;</span><br><span class="line">MD2_memset ((POINTER)context-&gt;state, <span class="number">0</span>, <span class="keyword">sizeof</span> (context-&gt;state)); MD2_memset ((POINTER)context-&gt;checksum, <span class="number">0</span>, <span class="keyword">sizeof</span> (context-&gt;checksum));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MD2 块更新操作。继续MD2消息摘要生成操作，运行其他的消息块并且更新上下文。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MD2Update</span> <span class="params">(context, input, inputLen)</span></span></span><br><span class="line"><span class="function">MD2_CTX *context</span>;                                        <span class="comment">/* 上下文 */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> *input;                                <span class="comment">/* i输入块 */</span></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> inputLen;                     <span class="comment">/* 输入块的长度 */</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i, index, partLen;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 更新模16后所得的个数 */</span></span><br><span class="line">  index = context-&gt;count;</span><br><span class="line">  context-&gt;count = (index + inputLen) &amp; <span class="number">0xf</span>;</span><br><span class="line"></span><br><span class="line">  partLen = <span class="number">16</span> - index;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 多次转换</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="keyword">if</span> (inputLen &gt;= partLen) &#123;</span><br><span class="line">    MD2_memcpy</span><br><span class="line">      ((POINTER)&amp;context-&gt;buffer[index], (POINTER)input, partLen);</span><br><span class="line">    MD2Transform (context-&gt;state, context-&gt;checksum, context-&gt;buffer);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = partLen; i + <span class="number">15</span> &lt; inputLen; i += <span class="number">16</span>)</span><br><span class="line">      MD2Transform (context-&gt;state, context-&gt;checksum, &amp;input[i]);</span><br><span class="line"></span><br><span class="line">    index = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 拷贝到输出缓冲区 */</span></span><br><span class="line">  MD2_memcpy</span><br><span class="line">    ((POINTER)&amp;context-&gt;buffer[index], (POINTER)&amp;input[i],</span><br><span class="line">     inputLen-i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MD2 终止。 结束MD2消息摘要操作，写入消息摘要并且初始化上下文。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MD2Final</span> <span class="params">(digest, context)</span></span></span><br><span class="line">unsigned char digest[16];                         /* 消息摘要 */</span><br><span class="line">MD2_CTX *context;                                        <span class="comment">/* 上下文 */</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> index, padLen;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*  填满到能被16整除</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  index = context-&gt;count;</span><br><span class="line">  padLen = <span class="number">16</span> - index;</span><br><span class="line">  MD2Update (context, PADDING[padLen], padLen);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 扩展校验码 */</span></span><br><span class="line">  MD2Update (context, context-&gt;checksum, <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 在摘要中储存状态信息 */</span></span><br><span class="line">  MD2_memcpy ((POINTER)digest, (POINTER)context-&gt;state, <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 初始化指针</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  MD2_memset ((POINTER)context, <span class="number">0</span>, <span class="keyword">sizeof</span> (*context));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MD2 基本的转换。基于块转换状态和跟新校验码。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MD2Transform</span> <span class="params">(state, checksum, block)</span></span></span><br><span class="line">unsigned char state[16];</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> checksum[<span class="number">16</span>];</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> block[<span class="number">16</span>];</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> i, j, t;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> x[<span class="number">48</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 从状态，块，状态^块构建加密块</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  MD2_memcpy ((POINTER)x, (POINTER)state, <span class="number">16</span>);</span><br><span class="line">  MD2_memcpy ((POINTER)x+<span class="number">16</span>, (POINTER)block, <span class="number">16</span>);</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">    x[i+<span class="number">32</span>] = state[i] ^ block[i];</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 加密块 (18 次循环).</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  t = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">18</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">48</span>; j++)</span><br><span class="line">      t = x[j] ^= PI_SUBST[t];</span><br><span class="line">    t = (t + i) &amp; <span class="number">0xff</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 保存新的状态 */</span></span><br><span class="line">  MD2_memcpy ((POINTER)state, (POINTER)x, <span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 更新校验码。</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  t = checksum[<span class="number">15</span>];</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">    t = checksum[i] ^= PI_SUBST[block[i] ^ t];</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 初始化指针</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  MD2_memset ((POINTER)x, <span class="number">0</span>, <span class="keyword">sizeof</span> (x));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注意： 尽可能使用memset代替for循环。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MD2_memcpy</span> <span class="params">(output, input, len)</span></span></span><br><span class="line"><span class="function">POINTER output</span>;</span><br><span class="line">POINTER input;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> len;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    output[i] = input[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注意： 尽可能使用memset代替for循环。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MD2_memset</span> <span class="params">(output, value, len)</span></span></span><br><span class="line"><span class="function">POINTER output</span>;</span><br><span class="line"><span class="keyword">int</span> value;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> len;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    ((<span class="keyword">char</span> *)output)[i] = (<span class="keyword">char</span>)value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mddriver-c"><a href="#mddriver-c" class="headerlink" title="mddriver.c"></a>mddriver.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MD</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MD MD5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"global.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MD == 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"md2.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MD == 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"md4.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MD == 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"md5.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 一个测试块的长度，测试块的数量。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEST_BLOCK_LEN 1000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEST_BLOCK_COUNT 1000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MDString <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">char</span> *))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MDTimeTrial <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MDTestSuite <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MDFile <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">char</span> *))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MDFilter <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> MDPrint <span class="title">PROTO_LIST</span> <span class="params">((<span class="keyword">unsigned</span> <span class="keyword">char</span> [<span class="number">16</span>]))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MD == 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MD_CTX MD2_CTX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDInit MD2Init</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDUpdate MD2Update</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDFinal MD2Final</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MD == 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MD_CTX MD4_CTX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDInit MD4Init</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDUpdate MD4Update</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDFinal MD4Final</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> MD == 5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MD_CTX MD5_CTX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDInit MD5Init</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDUpdate MD5Update</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MDFinal MD5Final</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 主程序。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   参数(可能有许多的组合):</span></span><br><span class="line"><span class="comment">     -sstring - 字符串的摘要</span></span><br><span class="line"><span class="comment">     -t       - 执行事件测试</span></span><br><span class="line"><span class="comment">     -x       - 执行测试较稳</span></span><br><span class="line"><span class="comment">     filename - 文件测试</span></span><br><span class="line"><span class="comment">     (none)   - 摘要标准输入</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(argc, argv)</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> argc</span>;</span><br><span class="line"><span class="keyword">char</span> *argv[];</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argc &gt; <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; argc; i++)</span><br><span class="line">      <span class="keyword">if</span> (argv[i][<span class="number">0</span>] == <span class="string">'-'</span> &amp;&amp; argv[i][<span class="number">1</span>] == <span class="string">'s'</span>)</span><br><span class="line">        MDString (argv[i] + <span class="number">2</span>);</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span> (argv[i], <span class="string">"-t"</span>) == <span class="number">0</span>)</span><br><span class="line">        MDTimeTrial ();</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span> (argv[i], <span class="string">"-x"</span>) == <span class="number">0</span>)</span><br><span class="line">        MDTestSuite ();</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        MDFile (argv[i]);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    MDFilter ();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  字符串的消息摘要</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MDString</span> <span class="params">(<span class="built_in">string</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="built_in">string</span></span>;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  MD_CTX context;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> digest[<span class="number">16</span>];</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> len = <span class="built_in">strlen</span> (<span class="built_in">string</span>);</span><br><span class="line"></span><br><span class="line">  MDInit (&amp;context);</span><br><span class="line">  MDUpdate (&amp;context, <span class="built_in">string</span>, len);</span><br><span class="line">  MDFinal (digest, &amp;context);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"MD%d (\"%s\") = "</span>, MD, <span class="built_in">string</span>);</span><br><span class="line">  MDPrint (digest);</span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 测量摘要TEST_BLOCK_COUNT TEST_BLOCK_LEN-byte</span></span><br><span class="line"><span class="comment">     块的事件.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MDTimeTrial</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  MD_CTX context;</span><br><span class="line">  <span class="keyword">time_t</span> endTime, startTime;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> block[TEST_BLOCK_LEN], digest[<span class="number">16</span>];</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span></span><br><span class="line">    (<span class="string">"MD%d time trial. Digesting %d %d-byte blocks ..."</span>, MD,</span><br><span class="line">     TEST_BLOCK_LEN, TEST_BLOCK_COUNT);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*初始化块 */</span></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; TEST_BLOCK_LEN; i++)</span><br><span class="line">    block[i] = (<span class="keyword">unsigned</span> <span class="keyword">char</span>)(i &amp; <span class="number">0xff</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 开始时间 */</span></span><br><span class="line">  time (&amp;startTime);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 摘要块 */</span></span><br><span class="line">  MDInit (&amp;context);</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; TEST_BLOCK_COUNT; i++)</span><br><span class="line">    MDUpdate (&amp;context, block, TEST_BLOCK_LEN);</span><br><span class="line">  MDFinal (digest, &amp;context);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 结束时间 */</span></span><br><span class="line">  time (&amp;endTime);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">" done\n"</span>);</span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"Digest = "</span>);</span><br><span class="line">  MDPrint (digest);</span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"\nTime = %ld seconds\n"</span>, (<span class="keyword">long</span>)(endTime-startTime));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span></span><br><span class="line">    (<span class="string">"Speed = %ld bytes/second\n"</span>,</span><br><span class="line">     (<span class="keyword">long</span>)TEST_BLOCK_LEN * (<span class="keyword">long</span>)TEST_BLOCK_COUNT/(endTime-startTime));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 字符串的消息摘要（测试）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MDTestSuite</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"MD%d test suite:\n"</span>, MD);</span><br><span class="line"></span><br><span class="line">  MDString (<span class="string">""</span>);</span><br><span class="line">  MDString (<span class="string">"a"</span>);</span><br><span class="line">  MDString (<span class="string">"abc"</span>);</span><br><span class="line">  MDString (<span class="string">"message digest"</span>);</span><br><span class="line">  MDString (<span class="string">"abcdefghijklmnopqrstuvwxyz"</span>);</span><br><span class="line">  MDString</span><br><span class="line">    (<span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"</span>);</span><br><span class="line">  MDString</span><br><span class="line">    (<span class="string">"1234567890123456789012345678901234567890\</span></span><br><span class="line"><span class="string">1234567890123456789012345678901234567890"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文件的消息摘要。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MDFile</span> <span class="params">(filename)</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *filename</span>;</span><br><span class="line">&#123;</span><br><span class="line">  FILE *file;</span><br><span class="line">  MD_CTX context;</span><br><span class="line">  <span class="keyword">int</span> len;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> buffer[<span class="number">1024</span>], digest[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ((file = fopen (filename, <span class="string">"rb"</span>)) == <span class="literal">NULL</span>)</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"%s can't be opened\n"</span>, filename);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    MDInit (&amp;context);</span><br><span class="line">    <span class="keyword">while</span> (len = fread (buffer, <span class="number">1</span>, <span class="number">1024</span>, file))</span><br><span class="line">      MDUpdate (&amp;context, buffer, len);</span><br><span class="line">    MDFinal (digest, &amp;context);</span><br><span class="line"></span><br><span class="line">    fclose (file);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"MD%d (%s) = "</span>, MD, filename);</span><br><span class="line">    MDPrint (digest);</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"\n"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 消息摘要输入和结果打印。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MDFilter</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  MD_CTX context;</span><br><span class="line">  <span class="keyword">int</span> len;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">char</span> buffer[<span class="number">16</span>], digest[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">  MDInit (&amp;context);</span><br><span class="line">  <span class="keyword">while</span> (len = fread (buffer, <span class="number">1</span>, <span class="number">16</span>, <span class="built_in">stdin</span>))</span><br><span class="line">    MDUpdate (&amp;context, buffer, len);</span><br><span class="line">  MDFinal (digest, &amp;context);</span><br><span class="line"></span><br><span class="line">  MDPrint (digest);</span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 十六进制打印消息摘要</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">MDPrint</span> <span class="params">(digest)</span></span></span><br><span class="line">unsigned char digest[16];</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">unsigned</span> <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">16</span>; i++)</span><br><span class="line">    <span class="built_in">printf</span> (<span class="string">"%02x"</span>, digest[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="测试样例"><a href="#测试样例" class="headerlink" title="测试样例"></a>测试样例</h3><p> 如下测试是在-x参数下的测试结果</p>
<p>MD2 测试样例:</p>
<blockquote>
<p>MD2 (“”) = 8350e5a3e24c153df2275c9f80692773<br>MD2 (“a”) = 32ec01ec4a6dac72c0ab96fb34c0b5d1<br>MD2 (“abc”) = da853b0d3f88d99b30283a69e6ded6bb<br>MD2 (“message digest”) = ab4f496bfb2a530b219ff33031fe06b0<br>MD2 (“abcdefghijklmnopqrstuvwxyz”) = 4e8ddff3650292ab5a4108c3aa47940b<br>MD2 (“ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789”) =<br>da33def2a42df13975352846c30338cd<br>MD2 (“123456789012345678901234567890123456789012345678901234567890123456<br>78901234567890”) = d5976f79d83d3a0dc9806c3c66f3efd8</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2019/01/23/ports-details/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/23/ports-details/" class="post-title-link" itemprop="url">端口对照表</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-01-23 10:02:28" itemprop="dateCreated datePublished" datetime="2019-01-23T10:02:28+08:00">2019-01-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="端口对照表"><a href="#端口对照表" class="headerlink" title="端口对照表"></a>端口对照表</h1><div class="table-container">
<table>
<thead>
<tr>
<th>关键字</th>
<th>端口</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>0/tcp</td>
<td>保留</td>
</tr>
<tr>
<td></td>
<td>0/udp</td>
<td>保留</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>tcpmux</td>
<td>1/tcp</td>
<td>TCP 端口服务多路器</td>
</tr>
<tr>
<td>tcpmux</td>
<td>1/udp</td>
<td>TCP 端口服务多路器</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Mark Lottor <mkl#nisc.sri.com></mkl#nisc.sri.com></td>
</tr>
<tr>
<td>compressnet</td>
<td>2/tcp</td>
<td>管理功能</td>
</tr>
<tr>
<td>compressnet</td>
<td>2/udp</td>
<td>管理功能</td>
</tr>
<tr>
<td>compressnet</td>
<td>3/tcp</td>
<td>压缩进程</td>
</tr>
<tr>
<td>compressnet</td>
<td>3/udp</td>
<td>压缩进程</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Bernie Volz <volz#process.com></volz#process.com></td>
</tr>
<tr>
<td>#</td>
<td>4/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>4/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>rje</td>
<td>5/tcp</td>
<td>远程工作入口</td>
</tr>
<tr>
<td>rje</td>
<td>5/udp</td>
<td>远程工作入口</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>6/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>6/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>echo</td>
<td>7/tcp</td>
<td>检测有无消息</td>
</tr>
<tr>
<td>echo</td>
<td>7/udp</td>
<td>检测有无消息</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>8/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>8/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>discard</td>
<td>9/tcp</td>
<td>弃用</td>
</tr>
<tr>
<td>discard</td>
<td>9/udp</td>
<td>弃用</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>10/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>10/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>systat</td>
<td>11/tcp</td>
<td>活动用户</td>
</tr>
<tr>
<td>systat</td>
<td>11/udp</td>
<td>活动用户</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>12/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>12/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>daytime</td>
<td>13/tcp</td>
<td><a href="https://baike.baidu.com/item/DAYTIME%E5%8D%8F%E8%AE%AE/11049479" target="_blank" rel="noopener">Daytime</a></td>
</tr>
<tr>
<td>daytime</td>
<td>13/udp</td>
<td><a href="https://baike.baidu.com/item/DAYTIME%E5%8D%8F%E8%AE%AE/11049479" target="_blank" rel="noopener">Daytime</a></td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>14/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>14/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>15/tcp</td>
<td>未分配 [was netstat]</td>
</tr>
<tr>
<td>#</td>
<td>15/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>16/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>16/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>qotd</td>
<td>17/tcp</td>
<td><a href="https://en.wikipedia.org/wiki/QOTD" target="_blank" rel="noopener">Quote of the Day</a></td>
</tr>
<tr>
<td>qotd</td>
<td>17/udp</td>
<td><a href="https://en.wikipedia.org/wiki/QOTD" target="_blank" rel="noopener">Quote of the Day</a></td>
</tr>
<tr>
<td>#</td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>msp</td>
<td>18/tcp</td>
<td>消息发送协议</td>
</tr>
<tr>
<td>msp</td>
<td>18/udp</td>
<td>消息发送协议</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Rina Nethaniel &lt;—-none—-&gt;</td>
</tr>
<tr>
<td>chargen</td>
<td>19/tcp</td>
<td>字符发生器</td>
</tr>
<tr>
<td>chargen</td>
<td>19/udp</td>
<td>字符发生器</td>
</tr>
<tr>
<td>ftp-data</td>
<td>20/tcp</td>
<td>FTP数据传输 [Default Data]</td>
</tr>
<tr>
<td>ftp-data</td>
<td>20/udp</td>
<td>FTP数据传输 [Default Data]</td>
</tr>
<tr>
<td>ftp</td>
<td>21/tcp</td>
<td>FTP数据传输 [Control]</td>
</tr>
<tr>
<td>ftp</td>
<td>21/udp</td>
<td>FTP数据传输 [Control]</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>22/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>22/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>telnet</td>
<td>23/tcp</td>
<td>Telnet</td>
</tr>
<tr>
<td>telnet</td>
<td>23/udp</td>
<td>Telnet</td>
</tr>
<tr>
<td>#</td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td></td>
<td>24/tcp</td>
<td>任何私有邮件系统</td>
</tr>
<tr>
<td></td>
<td>24/udp</td>
<td>任何私有邮件系统</td>
</tr>
<tr>
<td>#</td>
<td>Rick Adam <rick#uunet.uu.net></rick#uunet.uu.net></td>
</tr>
<tr>
<td>smtp</td>
<td>25/tcp</td>
<td>Simple Mail Transfer</td>
</tr>
<tr>
<td>smtp</td>
<td>25/udp</td>
<td>Simple Mail Transfer</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>26/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>26/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>nsw-fe</td>
<td>27/tcp</td>
<td>NSW User System FE</td>
</tr>
<tr>
<td>nsw-fe</td>
<td>27/udp</td>
<td>NSW User System FE</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Robert Thomas <bthomas#f.bbn.com></bthomas#f.bbn.com></td>
</tr>
<tr>
<td>#</td>
<td>28/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>28/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>msg-icp</td>
<td>29/tcp</td>
<td>MSG ICP</td>
</tr>
<tr>
<td>msg-icp</td>
<td>29/udp</td>
<td><a href="https://www.auditmypc.com/udp-port-29.asp" target="_blank" rel="noopener">MSG</a> <a href="https://en.wikipedia.org/wiki/Internet_Cache_Protocol" target="_blank" rel="noopener">ICP</a></td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Robert Thomas <bthomas#f.bbn.com></bthomas#f.bbn.com></td>
</tr>
<tr>
<td>#</td>
<td>30/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>30/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>msg-auth</td>
<td>31/tcp</td>
<td><a href="https://en.wikipedia.org/wiki/Message_authentication" target="_blank" rel="noopener">MSG Authentication</a></td>
</tr>
<tr>
<td>msg-auth</td>
<td>31/udp</td>
<td>MSG Authentication</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Robert Thomas <bthomas#f.bbn.com></bthomas#f.bbn.com></td>
</tr>
<tr>
<td>#</td>
<td>32/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>32/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>dsp</td>
<td>33/tcp</td>
<td>Display Support Protocol</td>
</tr>
<tr>
<td>dsp</td>
<td>33/udp</td>
<td>Display Support Protocol</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Ed Cain <cain#edn-unix.dca.mil></cain#edn-unix.dca.mil></td>
</tr>
<tr>
<td>#</td>
<td>34/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>34/udp</td>
<td>未分配</td>
</tr>
<tr>
<td></td>
<td>35/tcp</td>
<td>any private printer server</td>
</tr>
<tr>
<td></td>
<td>35/udp</td>
<td>any private printer server</td>
</tr>
<tr>
<td>#</td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>#</td>
<td>36/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>36/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>time</td>
<td>37/tcp</td>
<td>Time</td>
</tr>
<tr>
<td>time</td>
<td>37/udp</td>
<td>Time</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>rap</td>
<td>38/tcp</td>
<td>远程连接协议</td>
</tr>
<tr>
<td>rap</td>
<td>38/udp</td>
<td>远程连接协议(<a href="https://www.cert.gov.au/sites/g/files/net3281/f/remote_access_protocol.pdf" target="_blank" rel="noopener">Remote Access Protocol</a>)</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Robert Ullmann <ariel#world.std.com></ariel#world.std.com></td>
</tr>
<tr>
<td>rlp</td>
<td>39/tcp</td>
<td><a href="https://tools.ietf.org/html/rfc887" target="_blank" rel="noopener">Resource Location Protocol</a></td>
</tr>
<tr>
<td>rlp</td>
<td>39/udp</td>
<td>Resource Location Protocol</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Mike Accetta <mike.accetta#cmu-cs-a.edu></mike.accetta#cmu-cs-a.edu></td>
</tr>
<tr>
<td>#</td>
<td>40/tcp</td>
<td>未分配</td>
</tr>
<tr>
<td>#</td>
<td>40/udp</td>
<td>未分配</td>
</tr>
<tr>
<td>graphics</td>
<td>41/tcp</td>
<td>Graphics</td>
</tr>
<tr>
<td>graphics</td>
<td>41/udp    Graphics</td>
</tr>
<tr>
<td>nameserver</td>
<td>42/tcp</td>
<td>Host Name Server</td>
</tr>
<tr>
<td>nameserver</td>
<td>42/udp</td>
<td>Host Name Server</td>
</tr>
<tr>
<td>nicname</td>
<td>43/tcp</td>
<td>Who Is</td>
</tr>
<tr>
<td>nicname</td>
<td>43/udp</td>
<td>Who Is</td>
</tr>
<tr>
<td>mpm-flags</td>
<td>44/tcp</td>
<td>MPM FLAGS Protocol</td>
</tr>
<tr>
<td>mpm-flags</td>
<td>44/udp</td>
<td>MPM FLAGS Protocol</td>
</tr>
<tr>
<td>mpm</td>
<td>45/tcp</td>
<td>Message Processing Module [recv]</td>
</tr>
<tr>
<td>mpm</td>
<td>45/udp</td>
<td>Message Processing Module [recv]</td>
</tr>
<tr>
<td>mpm-snd</td>
<td>46/tcp</td>
<td>MPM [default send]</td>
</tr>
<tr>
<td>mpm-snd</td>
<td>46/udp</td>
<td>MPM [default send]</td>
</tr>
<tr>
<td>#</td>
<td></td>
<td>Jon Postel <postel#isi.edu></postel#isi.edu></td>
</tr>
<tr>
<td>ni-ftp</td>
<td>47/tcp</td>
<td>NI FTP</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Data-from-RFC1700"><a href="#Data-from-RFC1700" class="headerlink" title="Data from RFC1700"></a>Data from <a href="https://tools.ietf.org/html/rfc1700" target="_blank" rel="noopener">RFC1700</a></h3>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2018/10/01/sorts/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/01/sorts/" class="post-title-link" itemprop="url">排序汇总</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-10-01 22:24:57" itemprop="dateCreated datePublished" datetime="2018-10-01T22:24:57+08:00">2018-10-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><h2 id="1-选择排序"><a href="#1-选择排序" class="headerlink" title="1.选择排序"></a>1.选择排序</h2><pre><code> * 在未排序序列中找到最小元素，存放到排序序列的起始位置  
 * 再从剩余未排序元素中继续寻找最小元素，然后放到排序序列末尾。 
 * 以此类推，直到所有元素均排序完毕。 
</code></pre><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LEN 10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> data[LEN] = &#123;<span class="number">340</span>,<span class="number">34</span>,<span class="number">23</span>,<span class="number">35</span>,<span class="number">23</span>,<span class="number">53</span>,<span class="number">234</span>,<span class="number">32</span>,<span class="number">456</span>,<span class="number">4456</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; LEN;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span> k = i;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j = LEN - <span class="number">1</span>;j &gt; i;j--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>(data[j] &lt; data[k])</span><br><span class="line">			&#123;</span><br><span class="line">				k = j;</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		temp = data[i];</span><br><span class="line">		data[i] = data[k];</span><br><span class="line">		data[k] = temp;</span><br><span class="line">		</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; LEN;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d:%d\n"</span>,i,data[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>时间复杂度第一次N-1，第二次N-2 … 1。求和N^2/2 ，所以他的时间复杂度为O(n^2)。</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2018/09/24/cygwin-install/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/24/cygwin-install/" class="post-title-link" itemprop="url">cygwin的安装</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-24 10:30:00" itemprop="dateCreated datePublished" datetime="2018-09-24T10:30:00+08:00">2018-09-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Cygwin介绍和安装"><a href="#Cygwin介绍和安装" class="headerlink" title="Cygwin介绍和安装"></a>Cygwin介绍和安装</h1><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><ol>
<li>Cygwin能做什么</li>
</ol>
<ul>
<li>一个大型的GNU和开源工具的集合，能够在Windows下提供和<a href="https://en.wikipedia.org/wiki/Linux_distribution" target="_blank" rel="noopener">Linux distribution</a>相似的功能。</li>
<li>一个动态连接库（cygwin1.dll）提供大量的POSIX API的功能。</li>
</ul>
<ol>
<li>Cygwin不能做什么</li>
</ol>
<ul>
<li>不能在Windows上运行原生的Linux的应用。你必须从源码中重新构建你的应用。</li>
<li>不能创建Windows的应用，拥有像UNIX所具有的信号和伪终端等功能。如果你想使用Cygwin的功能，你同样需要从源码构建。</li>
</ul>
<h2 id="2-Cygwin的版本"><a href="#2-Cygwin的版本" class="headerlink" title="2. Cygwin的版本"></a>2. Cygwin的版本</h2><blockquote>
<p>最新版本是Cygwin DLL <a href="https://cygwin.com/ml/cygwin-announce/2018-08/msg00031.html" target="_blank" rel="noopener">2.11.0</a></p>
<p>注意 Cygwin <a href="https://cygwin.com/ml/cygwin/2016-06/msg00328.html" target="_blank" rel="noopener">2.5.2</a>是最后一个支持Windows XP 和 2003 的版本</p>
</blockquote>
<h2 id="3-安装Cygwin"><a href="#3-安装Cygwin" class="headerlink" title="3. 安装Cygwin"></a>3. 安装Cygwin</h2><p><strong>安装Cygwin的安装程序<a href="http://www.cygwin.com/setup-x86_64.exe" target="_blank" rel="noopener">setup-x86_64.exe</a></strong>（64位安装程序），或者<a href="http://www.cygwin.com/setup-x86.exe" target="_blank" rel="noopener">setup-x86.exe</a>（32位安装程序）</p>
<blockquote>
<p> 使用安装程序执行安装或者是更新</p>
</blockquote>
<p><strong>像安装MinGW一样配置环境变量</strong></p>
<p><a href="https://cygwin.com" target="_blank" rel="noopener">Cygwin官网</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2018/09/17/sqlite-source/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/17/sqlite-source/" class="post-title-link" itemprop="url">sqlite3源码分析</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-17 10:50:09" itemprop="dateCreated datePublished" datetime="2018-09-17T10:50:09+08:00">2018-09-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="sqlite3源码分析"><a href="#sqlite3源码分析" class="headerlink" title="sqlite3源码分析"></a>sqlite3源码分析</h1> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SQLITE_API <span class="keyword">int</span> <span class="title">sqlite3_initialize</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function">SQLITE_API <span class="keyword">int</span> <span class="title">sqlite3_shutdown</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function">SQLITE_API <span class="keyword">int</span> <span class="title">sqlite3_os_init</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function">SQLITE_API <span class="keyword">int</span> <span class="title">sqlite3_os_end</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>，会初始化SQLite的库，<font style="background-color:#FDD9D7;color: #f44336">sqlite_shutdown(void)</font>，会关闭任何由<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>开启的资源。会调用一个生命周期的进程。<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>是线程安全的，而<font style="background-color:#FDD9D7;color: #f44336">sqlite_shutdown(void)</font>不是，所以<font style="background-color:#FDD9D7;color: #f44336">sqlite_shutdown(void)</font>必须在单线程中调用。<font style="background-color:#FDD9D7;color: #f44336">sqlite_shutdown(void)</font>在最后一次调用<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>后调用。<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>可以被其他接口调用所以不需要直接调用，当<font style="background-color:#FDD9D7;color: #f44336">sqlite_open(void)</font><br>调用时，<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>也会随即调用。<font style="background-color:#FDD9D7;color: #f44336">sqlite_os_init(void)</font>会调用系统的制定的SQLite库。而<font style="background-color:#FDD9D7;color: #f44336">sqlite_os_end(void)</font>会撤销刚才的操作。程序不应该直接调用<font style="background-color:#FDD9D7;color: #f44336">sqlite_os_init(void)</font>和<font style="background-color:#FDD9D7;color: #f44336">sqlite_os_end(void)</font>。程序应当只调用<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>和<font style="background-color:#FDD9D7;color: #f44336">sqlite_shutdown(void)</font>。<font style="background-color:#FDD9D7;color: #f44336">sqlite_os_init(void)</font>会被<font style="background-color:#FDD9D7;color: #f44336">sqlite_initialize(void)</font>自动调用，而<font style="background-color:#FDD9D7;color: #f44336">sqlite_os_end(void)</font>会被<font style="background-color:#FDD9D7;color: #f44336">sqlite_shutdown(void)</font>自动调用。返回相应的状态码。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SQLITE_API <span class="keyword">int</span> <span class="title">sqlite3_config</span><span class="params">(<span class="keyword">int</span>, ...)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> <font style="background-color:#FDD9D7;color: #f44336">sqlite3_config(int, …)</font>全局配置，会在sqlite3_initialize()之后调用，非线程安全。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">SQLITE_API <span class="keyword">int</span> <span class="title">sqlite3_db_config</span><span class="params">(sqlite3*, <span class="keyword">int</span> op, ...)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><font style="background-color:#FDD9D7;color: #f44336">sqlite3_config(int, …)</font>与sqlite3_config区别在于，这可以制定任意一个连接的数据库，单独配置。第二个参数是确保那个部分的数据库会被配置。</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2018/09/16/sqlite-install/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/16/sqlite-install/" class="post-title-link" itemprop="url">sqlite3 C安装调用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-16 21:37:47" itemprop="dateCreated datePublished" datetime="2018-09-16T21:37:47+08:00">2018-09-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="sqlite3-C配置调用"><a href="#sqlite3-C配置调用" class="headerlink" title="sqlite3 C配置调用"></a>sqlite3 C配置调用</h1><h2 id="1-下载"><a href="#1-下载" class="headerlink" title="1.下载"></a>1.下载</h2><blockquote>
<p>从官网下载<a href="https://www.sqlite.org/2018/sqlite-amalgamation-3250000.zip" target="_blank" rel="noopener">源码下载</a>，里面只是几个头文件，源文件就够了。将源文件，头文件放在放在项目的根目录，放在并且新建一个include文件夹。</p>
</blockquote>
<h2 id="2-编写程序"><a href="#2-编写程序" class="headerlink" title="2.编写程序"></a>2.编写程序</h2><blockquote>
<p>connect.c</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sqlite3.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> * agrument,<span class="keyword">int</span> count,<span class="keyword">char</span>** result,<span class="keyword">char</span> **name)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; count;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\r\n"</span>,result[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	sqlite3 *ppDb;</span><br><span class="line">	<span class="keyword">if</span> (sqlite3_open(<span class="string">"demo.db"</span>,&amp;ppDb) == <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"database opened failed\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"database opened success\n"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">char</span> *errmsg;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(sqlite3_exec(ppDb,<span class="string">"create table demo(id integer primary key autoincrement,name varchar(100))"</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>,&amp;errmsg) == <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s"</span>,errmsg);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"creat table successfully\n"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(sqlite3_exec(ppDb,<span class="string">"insert into demo (name) values(\"1\")"</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>,&amp;errmsg) == <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\n"</span>,errmsg);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"insert data successfully\n"</span>);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(sqlite3_exec(ppDb,<span class="string">"select * from demo"</span>,callback,<span class="literal">NULL</span>,&amp;errmsg) == <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\n"</span>,errmsg);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	sqlite3_close(ppDb);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-运行"><a href="#3-运行" class="headerlink" title="3.运行"></a>3.运行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc connect.c sqlite3.c -o connect -Iinclude -std=c99</span><br></pre></td></tr></table></figure>
<h2 id="4-解释"><a href="#4-解释" class="headerlink" title="4.解释"></a>4.解释</h2><p><font style="background-color:#FDD9D7;color: #f44336">sqlite3</font> 结构体，数据库对象。<font style="background-color:#FDD9D7;color: #f44336">sqlite3_open(char * filename,sqlite3 ** db ) </font>。参数一，数据库名，若不存在就创建。返回1，出错；返回0，成功，<a href="https://www.sqlite.org/rescode.html" target="_blank" rel="noopener">返回样值</a>。<font style="background-color:#FDD9D7;color: #f44336">sqlite3_exec(sqlite3 *,const char * sql,int ( * callback)(void *,int,char **,char **),void *,char ** errmsg) </font>,第一个参数，数据库对象；第二个参数sql语句，第三个回调函数（回调函数传过来的参数，数据列个数，数据结果一维数组，表结构名称一维数组），第三个参数传递给回调参数，第四个参数错误异常信息。<font style="background-color:#FDD9D7;color: #f44336">sqlite3_close(sqlite3 *) </font>，释放链接。</p>
<blockquote>
<p><a href="https://www.sqlite.org" target="_blank" rel="noopener">sqlite官网</a></p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2018/09/15/swig/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/15/swig/" class="post-title-link" itemprop="url">swig的使用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-15 10:06:39" itemprop="dateCreated datePublished" datetime="2018-09-15T10:06:39+08:00">2018-09-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="swig的使用"><a href="#swig的使用" class="headerlink" title="swig的使用"></a>swig的使用</h1><h3 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h3><p>SWIG是一个能将C或者C++编写的程序与其它各种高级语言如Perl, Python, Ruby, 和 Tcl进行联接的开发工具。其原理是从C/C++头文件中找到申明并利用他们生成脚本语言访问C/C++代码所必须的封装代码。SWIG具有高度可自定义的特点，它能帮助你生成适合你的应用程序的封装包。</p>
<h3 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h3><p>我们以Ubuntu为例子，用Python作为目的语言，Python调用C。</p>
<ol>
<li><p>安装swig</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install swig</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装python-dev</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python-dev</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code> 这是Python的开发包，包含库文件，和头文件，头文件一般在
</code></pre><p>/usr/include/python2.x</p>
<ol>
<li><p>编写test.c文件</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="keyword">double</span> My_variable = <span class="number">3.0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fact</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (n &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> n*fact(n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">my_mod</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	 <span class="keyword">return</span> (x%y);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">get_time</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">time_t</span> ltime;</span><br><span class="line">	time(&amp;ltime);</span><br><span class="line">	<span class="keyword">return</span> ctime(&amp;ltime);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写配置文件test.i</p>
<p>配置文件其实就是一个接口文件</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%module example</span><br><span class="line">%&#123;</span><br><span class="line">		/* Put header files here or function declarations 	like below */</span><br><span class="line">	extern double My_variable;</span><br><span class="line">	extern int fact(int n);</span><br><span class="line">	extern int my_mod(int x, int y);</span><br><span class="line">		extern char *get_time();</span><br><span class="line">	%&#125;</span><br><span class="line"></span><br><span class="line">	extern double My_variable;</span><br><span class="line">	extern int fact(int n);</span><br><span class="line">		extern int my_mod(int x, int y);</span><br><span class="line">		extern char *get_time();</span><br></pre></td></tr></table></figure>
<ol>
<li>构建Python模块</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">swig -python test.i</span><br><span class="line">gcc -c test.c test_wrap.c \</span><br><span class="line">-I/usr/include/python2.7</span><br><span class="line">ld -shared test.o test_wrap.o -o _test.so</span><br></pre></td></tr></table></figure>
<p>如果在ld命令中出现了relocation R_X86_64_32 against xxx 错误，请在<br>gcc中加入-fPIC 然后再ld。</p>
<p><a href="http://www.swig.org" target="_blank" rel="noopener">swig地址</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://i.xhi.io/2018/09/14/licenses/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="magbone">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/14/licenses/" class="post-title-link" itemprop="url">几种开源协议</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-14 15:43:51" itemprop="dateCreated datePublished" datetime="2018-09-14T15:43:51+08:00">2018-09-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-04-13 12:50:02" itemprop="dateModified" datetime="2019-04-13T12:50:02+08:00">2019-04-13</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="几种开源协议"><a href="#几种开源协议" class="headerlink" title="几种开源协议"></a>几种开源协议</h1><h3 id="1-Boost-Software-License"><a href="#1-Boost-Software-License" class="headerlink" title="1.Boost Software License"></a>1.Boost Software License</h3><p> 这是协议正文</p>
<blockquote>
<p>Boost Software License - Version 1.0 - August 17th, 2003</p>
<p>Permission is hereby granted, free of charge, to any person or organization<br>obtaining a copy of the software and accompanying documentation covered by<br>this license (the “Software”) to use, reproduce, display, distribute,<br>execute, and transmit the Software, and to prepare derivative works of the<br>Software, and to permit third-parties to whom the Software is furnished to<br>do so, all subject to the following:</p>
<p>The copyright notices in the Software and this entire statement, including<br>the above license grant, this restriction and the following disclaimer,<br>must be included in all copies of the Software, in whole or in part, and<br>all derivative works of the Software, unless such copies or derivative<br>works are solely in the form of machine-executable object code generated by<br>a source language processor.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT<br>SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE<br>FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,<br>ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER<br>DEALINGS IN THE SOFTWARE.</p>
</blockquote>
<h4 id="1-1怎样在软件中添加协议"><a href="#1-1怎样在软件中添加协议" class="headerlink" title="1.1怎样在软件中添加协议"></a>1.1怎样在软件中添加协议</h4><p>将以下代码注释在文件源代码最前面</p>
<blockquote>
<p>//          Copyright Joe Coder 2004 - 2006.<br>// Distributed under the Boost Software License, Version 1.0.<br>//    (See accompanying file LICENSE_1_0.txt or copy at<br>//          <a href="https://www.boost.org/LICENSE_1_0.txt" target="_blank" rel="noopener">https://www.boost.org/LICENSE_1_0.txt</a>)</p>
</blockquote>
<h4 id="1-2适用范围"><a href="#1-2适用范围" class="headerlink" title="1.2适用范围"></a>1.2适用范围</h4><p> 该协议允许商业或非商业的衍生版本在不经过合法允许的情况下去发布你的代码，意思是说，你可以任意对代码进行修改，发布。Boost协议不需要在你的代码中加入版权协议了。如果你发布你自己的代码具有相同的协议内容，Boost协议就会收到它约束；你可以免费让你的喜欢的人使用</p>
<p> <a href="https://www.boost.org/users/license.html" target="_blank" rel="noopener">协议地址</a></p>
<h2 id="2-The-MIT-License-MIT"><a href="#2-The-MIT-License-MIT" class="headerlink" title="2.The MIT License (MIT)"></a>2.The MIT License (MIT)</h2><p>协议正文</p>
<blockquote>
<p>Copyright  &lt; YEAR &gt; &lt; COPYRIGHT HOLDER &gt;</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</blockquote>
<ul>
<li>MIT 协议比较宽松。仅仅需要版权以及协力条款。可以商用，分发，修改，个人使用。但是需要包含原作者的版权信息。</li>
</ul>
<h3 id="2-1-怎样使用"><a href="#2-1-怎样使用" class="headerlink" title="2.1 怎样使用"></a>2.1 怎样使用</h3><p>1.你可以<a href="https://github.com/remy/mit-license" target="_blank" rel="noopener">fork</a>这个项目，创建你自己的MIT协议，并且只需要放置连接。</p>
<p>2.Create a text file (typically named LICENSE or LICENSE.txt) in the root of your source code and copy the text of the license into the file. Replace [year] with the current year and [fullname] with the name (or names) of the copyright holders.<br>在你根源码文件新建一个LICENSE或者LICENSE.txt，并且将许可复制进去 。替换[year]为当前时间和[fullname]为版权持有者全名。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">magbone</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
             <div class="cc-license motion-element" itemprop="license">
              
                
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">magbone</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  



  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  

  

  

  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


</body>
</html>
